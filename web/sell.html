<!DOCTYPE html>
<!--
	Documentation: used http://www.syntaxpage.com/javascript/type-casting to learn how to typecast str to int using parseInt
-->

<head>
	<title>Textbook Swap</title>
	<link type="text/css" href="dark.css" rel="stylesheet">
	
	<style type="text/css">
		.formError { color: red; font-weight: bold }
	</style>
	
	<!-- JavaScript for sell form data validation -->
	<script type="text/javascript">
		var errorCount = new Number(0);
		
		function displayError( errorMsg )
		{
			errorCount = errorCount + 1;

			if (document.getElementById('formFeedback').innerHTML != "")
			{
				document.getElementById('formFeedback').innerHTML =
					document.getElementById('formFeedback').innerHTML + "<br/>" + "Error #" + errorCount + " - " + errorMsg;
			}
			else
			{
				document.getElementById('formFeedback').innerHTML = "Error #" + errorCount + " - " + errorMsg;
			}

		}
	
		function validateForm()
		{
			// Create value variables
			var title = document.forms["selling_info"]["title"].value;
			var isbn = document.forms["selling_info"]["isbn"].value;
			var publisher = document.forms["selling_info"]["publisher"].value;
			var price = document.forms["selling_info"]["price"].value;
			var email = document.forms["selling_info"]["email"].value;
			var password = document.forms["selling_info"]["password"].value;
			var fname = document.forms["selling_info"]["firstName"].value;
			var lname = document.forms["selling_info"]["lastName"].value;
			var phone = document.forms["selling_info"]["number"].value;
			var squadron = document.forms["selling_info"]["squadron"].value;
			
			// Title validation
			if (title == null || title == ""){
				alert("Title can't be blank");
				return false;
			}
			if (title.length > 30){
				alert("Title can't be more than 30 characters");
				return false;
			}
			
			// ISBN validation
			if (isNaN(isbn)){
				alert("ISBN must be a number");
				return false;
			}
			if (isbn.length != 13){
				alert("ISBN must be 13 digits long");
				return false;
			}
			
			// Publisher validation
			if (publisher.length > 30){
				alert("Publisher can't be more than 30 characters");
				return false;
			}
			
			// Price validation
			if (isNaN(price)){
				alert("Price must be a number");
				return false;
			}
			if (price == null || price == ""){
				alert("Please include a price");
				return false;
			}
			
			// Email validation
			emailRegExp = new RegExp("^[a-zA-Z0-9_.]+@[a-zA-Z0-9_.]+$");
			
			if (!emailRegExp.test(email) || email == null || email == ""){
				alert("Enter valid email");
				return false;
			}
			
			// Password validation
			if (password == null || password == ""){
				alert("Please include a password so that you can access your listing later");
				return false;
			}
			if (password.length > 45){
				alert("Password cannot exceed 45 characters in length");
				return false;
			}
			
			// First name validation
			if (fname.length > 25){
				alert("First name cannot exceed 25 characters in length");
				return false;
			}
			
			// Last name validation
			if (lname.length > 25){
				alert("Last name cannot exceed 25 characters in length");
				return false;
			}
			
			// Phone number validation
			if (phone != null && phone.length != 10){
				alert("Phone number must be 10 digits");
				return false;
			}
			if (isNaN(phone)){
				alert("Please enter your phone number without dashes, space, or parentheses");
				return false;
			}
			
			// Squadron validation
			var squad = parseInt(squadron);
			
			if (squad > 40 || squad < 1 || isNaN(squadron)){
				alert("Squadron must be a number between 1 and 40");
				return false;
			}
		}
	</script>		
</head>

<div id="header" class="container">
	<div id="logo">
		<h1><a href="about.html">Textbook Swap</a></h1>
	</div>
</div>

<body>
	<div id="menu">
		<ul>
			<li><a href="about.html" accesskey="1" title="">About</a></li>
			<li><a href="buy.php" accesskey="2" title="">Buy</a></li>
			<li class="active"><a href="#" accesskey="3" title="">Sell</a></li>
			<li><a href="login.php" accesskey="4" title="">Edit</a></li>
		</ul>
	</div>

	<div class="wrapper">
		<h2>Sell</h2>

		<tr>
			<td colspan="4">
				<center>
					<form name="selling_info" method="POST" id="sell_form" action="insert.php" enctype="multipart/form-data" onsubmit="return validateForm()">
						<h3>Enter the book information</h3>
						<div id="formFeedback" class="formError"></div>
						<table>
							<tbody>
								<tr>
									<td>Book Title*: </td>
									<td><input type="text" name="title" maxlength="50" size="50" align="left"></input></td>
									<td><div id="titleFeedback" class="formError"></div></td>
								</tr>
								<tr>
									<td>ISBN*: </td>
									<td><input type="text" name="isbn" maxlength="13" size="13" align="left"></input></td>
									<td><div id="isbnFeedback" class="formError"></div></td>
								</tr>
								<tr>
									<td>Publisher: </td>
									<td><input type="text" name="publisher" maxlength="30" size="30" align="left"></input></td>
								</tr>
								<tr>
								<tr>
									<td>Price*: </td>
									<td><input type="text" name="price" maxlength="10" size="10" align="left"></input></td>
									<td><div id="priceFeedback" class="formError"></div></td>
								</tr>
								<tr> 
									<td>Your Email*: </td>
									<td><input type="text" name="email" size="50" align="left"></input></td>
									<td><div id="emailFeedback" class="formError"></div></td>
								</tr>
								<tr>
									<td>Your Password*: </td>
									<td><input type="text" name="password" size="50" align="left"></input></td>
								</tr>
								<tr>
									<td>Your First Name: </td>
									<td><input type="text" name="firstName" size="25" align="left"></input></td>
									<td><div id="firstNameFeedback" class="formError"></div></td>
								</tr>
								<tr>
									<td>Your Last Name: </td>
									<td><input type="text" name="lastName" size="25" align="left"></input></td>
									<td><div id="lastNameFeedback" class="formError"></div></td>
								</tr>
								<tr>
									<td>Phone Number: </td>
									<td><input type="text" name="number" size="10" align="left"></input></td>
								</tr>
								<tr>
									<td>Squadron: </td>
									<td><input type="text" name="squadron" size="2" align="left"></input></td>
								</tr>
								<tr>
									<td colspan="2"><br/><input type="submit" value="Sell"></input></td>
								</tr>
							</tbody>
						</table>
					</form>
				</center>
			</td>
		</tr>
	</div>

</body>
</html>

